<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
    <title>Namaste</title>
    <meta name="description" content="Chat with your friends, securely ðŸ”’">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/modal.css">
</head>
<body>
    <div id="loginModal" class="modalBackGround">
        <div class="modalContentsContainer">
            <h1 class="namasteTextLogo" title="Namaste">Namaste</h1>
            <form onsubmit="passCreds(event)">
                <input type="text" id="login_username" title="Username" required placeholder="Username"/>
                <input type="text" id="login_passcode" title="PassCode" required placeholder="Passcode (min. 8 letters)" minlength="8"/>
                <input type="submit" disabled id="login_btn" disabled value="Enter">
            </form>
        </div>
    </div>

    <img id="videoCallModalFloatBtn" class="floatingBtn hide" data-target-modal="videoCallModal" src="./imgs/video-call.svg" alt="Return to Call" title="[Double Click] Return to Call Window" ondblclick="toggleView([this], [document.getElementById(this.dataset.targetModal)])"/>
    <div id="videoCallModal" class="modalBackGround hide" data-target-float-btn="videoCallModalFloatBtn">
        <img class="closeModalBtn" src="./imgs/close.svg" alt="Close" title="Close" onclick="toggleView([this.parentElement], [document.getElementById(this.parentElement.dataset.targetFloatBtn)])">
        <div class="modalContentsContainer">
            <div class="videoContainer">
                <video id="myVideo" muted autoplay poster="./imgs/no-connection.jpeg"></video>
                <video id="remoteVideo" autoplay poster="./imgs/no-connection.jpeg"></video>
            </div>
            <div class="callControls">
                <canvas id="myWaveform"></canvas>
                <img src="./imgs/call-end.svg" alt="End Call" onclick="endCall()">
                <canvas id="remoteWaveform" style="transform: rotate(180deg);"></canvas>
            </div>
        </div>
    </div>

    <div id="menu">
        <div class="toprow">
            <img src="./imgs/close.svg" alt="Close Menu" title="Close menu" onclick="closeMenu()">
            <h1>Active Users</h1>
        </div>
        <ul style="flex: none">
            <li style="border-bottom: 2px solid #fff;">
                <h2 style="color: #fff;">UserName</h2>
                <h2 style="color: #fff;">Connection ID</h2>
                <h2 style="color: #fff;">Connected Since</h2>
            </li>
        </ul>
        <ul id="activeUsers"></ul>
    </div>

    <div class="mainview">
        <div class="header">
            <img src="./imgs/menu.svg" alt="Menu" title="Menu" onclick="openMenu()">
            <h1 class="namasteTextLogo" title="Namaste">Namaste</h1>
            <img src="./imgs/share.svg" alt="Share" title="Share link to this room" onclick="copyToClipboard()">
        </div>
        <div id="msg-container"></div>
        <form id="send-container" onsubmit="sendMessage(event)">
            <img src="./imgs/call.svg" alt="Call" title="Call" onclick="sendCallRequest('audio')" />
            <img src="./imgs/video-call.svg" alt="Video Call" title="Video Call" onclick="sendCallRequest('video')" />
            <input name="txtMsgBox" placeholder="Message" title="Enter your Message" tabindex="0" onload="this.focus()" required autocomplete="off" id="txt-msg-box" />
            <input type="image" src="./imgs/send.svg" alt="Send" id="send-btn" title="Send" disabled />
        </form>
    </div>

    <script defer src="https://unpkg.com/lzutf8@latest/build/production/lzutf8.min.js"></script>
    <script defer src="https://unpkg.com/peerjs@latest/dist/peerjs.min.js"></script>
	<script defer src="https://unpkg.com/socket.io@latest/client-dist/socket.io.min.js"></script>
	<script defer src="js/Encryption/sec-v1.1.js"></script>
	<script defer src="js/Waveform.js"></script>
	<script defer src="js/DOM.js"></script>
	<script defer src="js/script.js"></script>
</body>
</html>